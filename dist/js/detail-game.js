"use strict";function renderData(a){var e='<header><section class="header-scores">';e+='<div><img class="header-scores-logo1eft" src="'+a.teamA.logo+'"/></div>',e+='<div class="game-score"><span><b>'+a.teamA.score+"</b> </span><span><b>:</b></span>",e+=" <span><b>"+a.teamB.score+"</b></span></div> ",e+='<div><img class="header-scores-logoright" src="'+a.teamB.logo+'"/></div>',e+="</section>",e+='<section class="header-teams">',e+='<div class="header-teams-left">'+a.teamA.name+"</div> ",e+='<div class="header-teams-middle"><span>'+a.gameTime+" "+a.gameType+"</span></div> ",e+='<div class="header-teams-right">'+a.teamB.name+'</div> </section> <section class="ProgressBar clearFix"> ';var s=Math.max(a.teamA.support_numbber,a.teamB.support_numbber),t=Math.max(a.teamA.support_numbber/s*80,5),i=Math.max(a.teamB.support_numbber/s*80,5);e+='<div class="ProgressBar-leftbox"><div class="ProgressBar-left" style="width:'+t+'%"></div></div>',e+='<div class="ProgressBar-rightbox"><div class="ProgressBar-right" style="width:'+i+'%"></div></div> </section>',e+='<section class="supporters"><a href="##" class="sp sp-left" data-id="'+a.dataId+'" data-team="'+a.teamA.teamId+'"><img class="supporters-leftlogo" src="images/matchdetail_ic_support.png"/>',e+='<span class="supporters-leftNumber supp" id="supporters-leftNumber"> '+a.teamA.support_numbber+"</span></a>",e+='<div class="space-holder"></div>',e+='<a href="##" class="sp sp-right" data-id="'+a.dataId+'" data-team="'+a.teamB.teamId+'">',e+='<img class="supporters-rightlogo" src="images/matchdetail_ic_support.png"/><span class="supporters-rightNumber supp" id="supporters-rightNumber">'+a.teamB.support_numbber+"</span></a></section> ",e+="</header>","1"==a.state?(e+=$.isEmptyObject(a.bet)?'<div id="wrap"><ul class="outer"><li class="outList selected" data-id="0"><a href="##"><div class="border">直播</div></a></li><li class="outList " data-id="1"><a href="##"><div class="border">讨论</div></a></li><li class="outList " data-id="2"><a href="##"><div class="border">新闻</div></a></li></ul><div class="outContainer ">':'<div id="wrap"><ul class="outer"><li class="outList selected" data-id="0"><a href="##"><div class="border">直播</div></a></li><li class="outList " data-id="1"><a href="##"><div class="border">讨论</div></a></li><li class="outList " data-id="2"><a href="##"><div class="border">新闻</div></a></li><li class="outList " data-id="3"><a href="##"><div class="border">竞猜</div></a></li></ul><div class="outContainer ">',e+='<div class="live" data-id="0">',e+='<p class="live-tip">请选择直播平台</p>',e+='<section class="live-list clearfix">',e+='<div class="live-wrap">',$.each(a.originSrc,function(a,s){e+='<div class="deck select"><a href="###" data-url="'+s.link+'"><div class="deck-item">',e+='<div class="deck-img"><img src="'+s.logo+'" alt=""/></div>',e+='<span class="live-button">观看直播</span></div></a></div>'}),e+="</div></section></div>"):"3"==a.state?(e+=$.isEmptyObject(a.bet)?'<div id="wrap"><ul class="outer"><li class="outList selected" data-id="0"><a href="##"><div class="border">直播</div></a></li><li class="outList " data-id="1"><a href="##"><div class="border">讨论</div></a></li><li class="outList " data-id="2"><a href="##"><div class="border">新闻</div></a></li></ul><div class="outContainer ">':'<div id="wrap"><ul class="outer"><li class="outList selected" data-id="0"><a href="##"><div class="border">直播</div></a></li><li class="outList " data-id="1"><a href="##"><div class="border">讨论</div></a></li><li class="outList " data-id="2"><a href="##"><div class="border">新闻</div></a></li><li class="outList " data-id="3"><a href="##"><div class="border">竞猜</div></a></li></ul><div class="outContainer ">',e+='<div class="live" data-id="0">',e+='<p class="live-tip">请选择直播平台</p>',e+='<section class="live-list clearfix">',e+='<div class="live-wrap">',$.each(a.originSrc,function(a,s){e+='<div class="deck no-select">',e+='<a href="###">',e+='<div class="deck-img"><img src="'+s.logo+'" alt=""/></div>',e+='<span class="live-button">即将开始</span>',e+="</a></div>"}),e+="</div></section></div>"):"2"==a.state?(e+=$.isEmptyObject(a.bet)?'<div id="wrap"><ul class="outer"><li class="outList selected" data-id="0"><a href="##"><div class="border">视频</div></a></li><li class="outList " data-id="1"><a href="##"><div class="border">讨论</div></a></li><li class="outList " data-id="2"><a href="##"><div class="border">新闻</div></a></li></ul><div class="outContainer ">':'<div id="wrap"><ul class="outer"><li class="outList selected" data-id="0"><a href="##"><div class="border">视频</div></a></li><li class="outList " data-id="1"><a href="##"><div class="border">讨论</div></a></li><li class="outList " data-id="2"><a href="##"><div class="border">新闻</div></a></li><li class="outList " data-id="3"><a href="##"><div class="border">竞猜</div></a></li></ul><div class="outContainer ">',a.relateVideos.length>0?(e+='<div class="live" data-id="0">',e+='<section class="list"><ul> ',$.each(a.relateVideos,function(a,s){e+='<li class="clearfix"><a href="##" class="list-item" data-type="'+s.articleType+'" data-id="'+s.extra+'"><img class="fl" src="'+s.thumbnail+'"/>',e+='<p class="list-title">'+s.title+"</p> ",s.tagColor&&s.tagName&&(e+='<span class="list-tag" style="color:'+s.tagColor+";border-color:"+s.tagColor+';">'+s.tagName+"</span>");var t,i=new Date;s.updateTime&&(i=new Date(1e3*s.updateTime)),t=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),e+='<span class="list-time">'+t+"</span>",e+="</a></li>"}),e+="</ul></section></div>"):e+='<div class="live" data-id="0" style="height: 10rem;font-size: 0.9rem; text-align: center;line-height:10rem;background-color: #ffffff;">暂无视频数据</div>'):e+='<div class="live" data-id="0" style="height: 10rem;font-size: 0.9rem;line-height:10rem; text-align: center;display:block;background-color: #ffffff;">',sourceId=a.changyanSid,sourceTitle=a.title;try{Jnapp.jn_getComment(sourceId,sourceTitle)}catch(d){}e+='<div class="reviews" data-id="1">',e+="</div>",a.recomendVideos.length>0?(e+='<div class="news" data-id="2">',e+='<section class="list"><ul>',$.each(a.recomendVideos,function(a,s){e+='<li class="clearfix"><a href="##" class="list-item" data-type="'+s.articleType+'" data-id="'+s.extra+'">',e+='<img class="fl" src="'+s.thumbnail+'"/>',e+='<p class="list-title">'+s.title+"</p>",s.tagColor&&s.tagName&&(e+='<span class="list-tag" style="color:'+s.tagColor+";border-color:"+s.tagColor+';">'+s.tagName+"</span>");var t,i=new Date;s.updateTime&&(i=new Date(1e3*s.updateTime)),t=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),e+='<span class="list-time">'+t+"</span>",e+="</a></li> "}),e+=" </ul></section></div>"):e+='<div class="news" data-id="2" style="height: 10rem;font-size: 0.9rem;line-height:10rem; text-align: center;background-color: #ffffff;">暂无新闻数据</div>';var l;if(!$.isEmptyObject(a.bet)){l=2==a.bet.status.type?"赔&nbsp率":a.bet.status.message;var r=new Date(1475164800),c=r.getHours(),n=r.getMinutes();c=10>c?"0"+c:r.getHours(),n=10>n?"0"+n:r.getMinutes(),e+='<div class="guess" data-id="3" data-staus="'+a.bet.status.type+'" >',e+='<section class="live-byword-listbox">',e+='<div class="guess-nums"><p>'+a.bet.joinNum+"参与</p></div>",e+='<div class="guess-container">',e+='<div class="guess-game">',e+='<div class="game-head-icon"><img src="'+a.bet.teamA.logo+'" alt=""/></div>',e+='<div class="team-name">'+a.bet.teamA.name+"</div>",e+='<div class="guess-game-time">'+c+":"+n+"</div>",e+='<div class="guess-game-time">'+a.gameType+"</div>",e+='<div class="team-name">'+a.bet.teamB.name+"</div>",e+='<div class="game-head-icon"><img src="'+a.bet.teamB.logo+'" alt=""/></div></div>',e+='<div class="guess-option">',e+='<a href="" class="team-win-left" data-id="'+a.dataId+'"  data-team="1" data-teamname="'+a.bet.teamA.name+'" data-odd="'+a.bet.teamA.odds+'"><p><span>'+a.bet.teamA.name+"胜</span><span>"+a.bet.teamA.odds+"</span></p></a>",e+='<div class="team-state"><span>'+l+"</span></div>",e+='<a href="" class="team-win-right" data-id="'+a.dataId+'"  data-team="2" data-teamname="'+a.bet.teamB.name+'" data-odd="'+a.bet.teamB.odds+'"><p><span>'+a.teamB.name+"胜</span><span>"+a.bet.teamB.odds+"</span></p></div></div></a>",e+='<div class="guess-tip"><p>实际结算赔率以竞猜结束的赔率为准 <a href="##"><em class="more-guess-rule">更多规则</em></a></p></div>',e+="</section>",e+="</div></div>"}$("#box").html(e)}function renderReviews(a,e){function s(a){var e=6e4,s=60*e,t=24*s,d=(new Date).getTime(),l=d-a;if(!(0>l)){var r=l/t,c=l/s,n=l/e;return i=r>=1?""+parseInt(r)+"天前":c>=1?""+parseInt(c)+"小时前":n>=1?""+parseInt(n)+"分钟前":"刚刚"}}var t,i,d=$(".new-reciews");if(topicId=a.topic_id,allpage=a.cmt_sum/30,0===parseInt(e)&&(a.hots&&a.hots.length>0||a.comments&&a.comments.length>0?(t="<div>",a.hots&&a.hots.length>0&&(t+='<section class="hot-reviews">',s(a.hots.create_time),t+='<div class="reviews-title"><span>热门讨论</span></div>',$.each(a.hots,function(a,e){t+='<div class="reviews-box">',t+='<div class="reviews-header"><img src="'+e.passport.img_url+'" alt=""/></div>',t+='<div class="reviews-right">',t+='<span class="reviews-name">'+e.passport.nickname+"</span>",t+='<span class="reviews-time">'+i+"</span>",t+='<p class="reviews-content">'+e.content+"</p></div></div>"}),t+="</section>"),s(a.comments.create_time),t+='<section class="new-reciews">',t+='<div class="reviews-title"><span>最新讨论</span></div>',$.each(a.comments,function(a,e){t+='<div class="reviews-box">',t+='<div class="reviews-header"><img src="'+e.passport.img_url+'" alt=""/></div>',t+='<div class="reviews-right">',t+='<span class="reviews-name">'+e.passport.nickname+"</span>",t+='<span class="reviews-time">'+i+"</span>",t+='<p class="reviews-content">'+e.content+"</p></div></div>"}),t+="</section>",t+="</div>",$(".reviews").html(t)):$(".reviews").html('<div style="height: 10rem;font-size: 0.9rem;line-height:10rem; text-align: center;background-color: #ffffff;">暂无讨论数据</div>')),1===parseInt(e)){var l="<div>";s(a.comments.create_time),$.each(a.comments,function(a,e){l+='<div class="reviews-box">',l+='<div class="reviews-header"><img src="'+e.passport.img_url+'" alt=""/></div>',l+='<div class="reviews-right">',l+='<span class="reviews-name">'+e.passport.nickname+"</span>",l+='<span class="reviews-time    ">'+i+"</span>",l+='<p class="reviews-content">'+e.content+"</p></div></div>",l+='<span class="reviews-name">'+e.passport.nickname+"</span>",l+='<span class="reviews-time">'+i+"</span>",l+='<p class="reviews-content">'+e.content+"</p></div></div>"}),l+="</div>",d.append(l)}}var cacheData=null,sourceId,sourceTitle,topicId,allpage,load=!1,pageTitle,isLoading=!1;window.Jn={setCookie:function(a,e,s){var t=new Date;t.setDate(t.getDate()+s),document.cookie=a+"="+e+";expires="+t},getCookie:function(a){for(var e=document.cookie.split("; "),s=0;s<e.length;s++){var t=e[s].split("=");if(t[0]==a)return t[1]}return""}},Jn.setData=function(a){"gameInitDetail"==a.key&&renderData(a.content)},Jn.addComment=function(a){isLoading=!1,"10000"==a.code&&renderReviews(a.data,a.type)},Jn.refreshComment=function(){load&&"讨论"==pageTitle&&!isLoading&&(isLoading=!0,Jnapp.jn_getComment(sourceId,sourceTitle))},$(function(){var a=$(".guess").data("staus");"2"!==a&&$(".guess-option a").addClass("selectedGray"),$(document).on("click",".deck>a",function(a){a.preventDefault();var e=$(this).data("url");try{$(this).addClass("selected"),$(this).parent().addClass("selected").siblings(".deck").removeClass("selected"),Jnapp.jn_related(5,e+"")}catch(a){}}),$(document).on("click",".live-byword-list-words-images img",function(a){a.preventDefault();var e=$(this).attr("alt");e=e?e:"";try{Jnapp.jn_image($(this).attr("src"),e,"")}catch(a){}}),$(document).on("click",".list-item",function(a){a.preventDefault();try{Jnapp.jn_related($(this).data("type"),$(this).data("id")+"")}catch(e){}}),$(document).on("click",".sp-left",function(a){a.preventDefault();var e=$("#supporters-leftNumber"),s=e.text(),t=$(this).data("id"),i=$(this).data("team");try{if(Jnapp.jn_getData("sp-"+t))return void window.alert("你已经支持过啦!");s++,e.html(s),$(this).find("img").attr("src","images/matchdetail_ic_support_red.png"),Jnapp.jn_setData("sp-"+t,s+""),Jnapp.jn_agree(7,t+"",i+"")}catch(a){}}),$(document).on("click",".sp-right",function(a){a.preventDefault();var e=$("#supporters-rightNumber"),s=$(this).data("id"),t=$(this).data("team"),i=e.text();try{if(Jnapp.jn_getData("sp-"+s))return void window.alert("你已经支持过啦!");i++,e.html(i),$(this).find("img").attr("src","images/matchdetail_ic_support_blue.png"),Jnapp.jn_setData("sp-"+s,i+""),Jnapp.jn_agree(7,s+"",t+"")}catch(a){}}),$(document).on("click",".outList a",function(a){a.preventDefault();var e=1;if(pageTitle=$(this).text(),!$(this).hasClass("selected")){var s=$(this).parent().data("id"),t=$(".outContainer");$(this).parent().addClass("selected").siblings().removeClass("selected"),t.children().eq(s)&&t.children().eq(s).show().siblings().hide()}"讨论"==pageTitle&&(load=!0),$(document).on("scroll",function(a){a.preventDefault();var s=$(window).scrollTop(),t=$(document).height(),i=$(window).height(),d=s+i;if(d>=t&&(e++,allpage>=e))try{load&&"讨论"==pageTitle&&!isLoading&&(isLoading=!0,Jnapp.jn_getMoreComment(sourceId+"",e+"","30",topicId+""))}catch(a){}})}),$(document).on("click",".play-icon",function(a){a.preventDefault();try{Jnapp.jn_related(5,$(this).data("url"))}catch(a){}}),$(document).on("click",".guess-option a",function(a){a.preventDefault();var e=$(this).data("id"),s=$(this).data("team"),t=$(this).data("teamname"),i=$(this).data("odd");if(2==$(".guess").data("staus"))try{Jnapp.jn_betting(e+"",1*s,t+"",1*i)}catch(a){}})});