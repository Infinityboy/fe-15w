"use strict";function getDatediff(e){var s,a=6e4,t=60*a,i=24*t,n=(new Date).getTime(),c=n-e;if(!(0>c)){var l=c/i,r=c/t,p=c/a;if(l>=1){var m=new Date(e);s=m.getMonth()+1+"-"+m.getDate()}else s=r>=1?""+parseInt(r)+"小时前":p>=1?""+parseInt(p)+"分钟前":"刚刚";return s}}function moreReview(e){var s="";e.length>0&&$.each(e,function(a,t){e.length>1&&e.length<4?s+='<div class="reviews-children"><p class="child-title clearfix">'+(a+1)+".&ensp;"+t.passport.nickname+'<a href="#" class="nickname-right"><img src="images/review-zan_2x.png" alt=""></a></p><p class="child-content">'+t.content+"</p></div>":0==a?s+='<div class="reviews-children" ><p class="child-title">1.&ensp;'+t.passport.nickname+'<a href="#" class="nickname-right"><img src="images/review-zan_2x.png" alt=""></a></p><p class="child-content">'+t.content+"</p></div>":a>0&&a<e.length-2?s+='<div><div class="reviews-children center-more" style="display: none" ><p class="child-title clearfix">'+(a+1)+".&nbsp;"+t.passport.nickname+'</p><p class="child-content">'+t.content+'</p></div><a href="#" class="show-all-reviews"><p>显示全部评论</p></a></div>':a==e.length-2?s+='<div class="reviews-children" ><p class="child-title clearfix">'+(e.length-1)+".&ensp;"+t.passport.nickname+'<a href="#" class="nickname-right"><img src="images/review-zan_2x.png" alt=""></a></p><p class="child-content">'+t.content+"</p></div>":a==e.length-1&&(s+='<div class="reviews-children" ><p class="child-title clearfix">'+e.length+".&ensp;"+t.passport.nickname+'<a href="#" class="nickname-right"><img src="images/review-zan_2x.png" alt=""></a></p><p class="child-content">'+t.content+"</p></div>")})}function renderData(e){e?(htmlRev+='<div class="list"><h3>竞猜评论</h3><ul id="news_list">',htmlRev+='<section class="hot-reviews">',e.hots.length>=5?$.each(e.hots,function(e,s){5>e&&(htmlRev+='<div class="reviews-box">',htmlRev+='<div class="reviews-header"><img src="'+s.passport.img_url+'" alt=""/></div>',htmlRev+='<div class="reviews-right">',htmlRev+='<p class="clearfix"><span class="reviews-name">'+s.passport.nickname+'</span><span class="nickname-right"><a href="#" class="reviews-zan"><img src="images/review-zan_2x.png" alt=""></a><a href="#" class="reviews-replay"><img src="images/Reply_2x.png" alt=""></a></span></p>',htmlRev+='<span class="reviews-time">'+getDatediff(1e3*s.create_time)+"</span>",moreReview(s.comments),htmlRev+='<p class="reviews-content">'+s.content+"</p></div></div>")}):0==e.hots.length?$.each(e.comments,function(e,s){5>e&&(htmlRev+='<div class="reviews-box">',htmlRev+='<div class="reviews-header"><img src="'+s.passport.img_url+'" alt=""/></div>',htmlRev+='<div class="reviews-right">',htmlRev+='<p class="clearfix"><span class="reviews-name">'+hotContent.passport.nickname+'</span><span class="nickname-right"><a href="#" class="reviews-zan"><img src="images/review-zan_2x.png" alt=""></a><a href="#" class="reviews-replay"><img src="images/Reply_2x.png" alt=""></a></span></p>',htmlRev+='<span class="reviews-time">'+getDatediff(1e3*s.create_time)+"</span>",moreReview(s.comments),htmlRev+='<p class="reviews-content">'+s.content+"</p></div></div>")}):e.hots.length>0&&e.hots.length<5&&($.each(e.hots,function(e,s){htmlRev+='<div class="reviews-box">',htmlRev+='<div class="reviews-header"><img src="'+s.passport.img_url+'" alt=""/></div>',htmlRev+='<div class="reviews-right">',htmlRev+='<p class="clearfix"><span class="reviews-name">'+s.passport.nickname+'</span><span class="nickname-right"><a href="#" class="reviews-zan"><img src="images/review-zan_2x.png" alt=""></a><a href="#" class="reviews-replay"><img src="images/Reply_2x.png" alt=""></a></span></p>',htmlRev+='<span class="reviews-time">'+getDatediff(1e3*s.create_time)+"</span>",moreReview(s.comments),htmlRev+='<p class="reviews-content">'+s.content+"</p></div></div>"}),$.each(e.comments,function(s,a){s<5-e.hots.length&&(htmlRev+='<div class="reviews-box">',htmlRev+='<div class="reviews-header"><img src="'+a.passport.img_url+'" alt=""/></div>',htmlRev+='<div class="reviews-right">',htmlRev+='<p class="clearfix"><span class="reviews-name">'+hotContent.passport.nickname+'</span><span class="nickname-right"><a href="#" class="reviews-zan"><img src="images/review-zan_2x.png" alt=""></a><a href="#" class="reviews-replay"><img src="images/Reply_2x.png" alt=""></a></span></p>',htmlRev+='<span class="reviews-time">'+getDatediff(1e3*a.create_time)+"</span>",moreReview(a.comments),htmlRev+='<p class="reviews-content">'+a.content+"</p></div></div>")})),htmlRev+="</section>"):htmlRev+='<div class="reviews-box"><img src="images/picture_2x.png>" alt=""></div>',$(".reviews").html(htmlRev)}function renderData(e){cacheData=e;var s=e.title?e.title:"",a=e.time?e.time:"",t=e.content?e.content:"",i='<header><h1 class="title">'+s+"</h1>";i+='<div class="meta"><span class="date">'+a+'</span><span class="author color-blue ml5">',i+=e.author+"</span></div></header>",i+='<div class="indent flat-content">'+t+"</div>",i+='<div class="share-short-issue"><p></p><p>分享给召唤师们</p><p></p></div>',i+='<div class="maintext-share"><a href="#" class="maintext-share-weixin"><img src="images/news_btn_weixin_nor.png" /></a><a href="#" class="maintext-share-frident"><img src="images/news_btn_pyq_nor.png" /></a><a href="" class="maintext-share-qq-space"><img src="images/QQ_2x.png" /></a><a href="#" class="maintext-share-qq"><img src="images/qq_zone.png" /></a><a href="#" class="maintext-share-weibo"><img src="images/news_btn_weibo_nor.png" /></a></div></div>',i+='<div class="reviews"></div>',Jnapp.jn_getComment("");var n=e.relate_news;n.length>0&&(i+='<div class="list"><h3>相关新闻</h3><ul id="news_list">',$.each(n,function(e,s){i+='<li class="clearFix"><a href="###" class="clearfix list-item" data-type="'+s.articleType+'" data-id="'+s.extra+'"><div class="news-left"><p class="list-title">'+s.title+"</p>",s.tagColor&&s.tagName&&(i+='<span class="list-tag" style="color:'+s.tagColor+";border-Color:"+s.tagColor+';">'+s.tagName+"</span>"),i+=s.comments?'<span class="list-review"><img src="images/Reply_2x.png" alt="">&ensp;'+s.comments+"</span>":'<span class="list-review"><img src="images/Reply_2x.png" alt="">&ensp;0</span>',s.updateTime&&(i+='<span class="list-time">'+getDatediff(1e3*s.updateTime)+"</span>"),i+='</div><div class="news-right"><img class="fl" src="'+s.thumbnail+'"/></div></a></li>'}),i+='</ul></div><section class="line"></section>'),$("#newsDetail").html(i),$(".indent p img").parent().css({padding:"0",margin:"1.5rem 0"})}window.Jn={};var cacheData=null,htmlRev;Jn.setData=function(e){"newsInitDetail"==e.key&&renderData(e.content)},Jn.addComment=function(e){isLoading=!1,"10000"==e.code&&renderData(e.data)},Jn.changeFontSize=function(e){var s=$(".indent p");1==e?s.css("font-size","76%"):2==e||(3==e?s.css("font-size","124%"):4==e?s.css("font-size","136%"):5==e&&s.css("font-size","148%"))},$(function(){function e(e){try{var s=cacheData.thumbnail,a=cacheData.title,t=cacheData.excerpt,i=cacheData.shareUrl;Jnapp.jn_share(e,s,a,t,i)}catch(n){}}$(document).on("click",".list-item",function(e){e.preventDefault();try{Jnapp.jn_related($(this).data("type"),$(this).data("id")+"")}catch(e){}}),$(document).on("click",".flat-content img",function(e){e.preventDefault();var s=$(this).attr("alt");s=s?s:"";try{Jnapp.jn_image($(this).attr("src"),s,"")}catch(e){}}),$(document).on("click",".maintext-share-weibo",function(s){s.preventDefault(),e(0)}),$(document).on("click",".maintext-share-weixin",function(s){s.preventDefault(),e(1)}),$(document).on("click",".maintext-share-frident",function(s){s.preventDefault(),e(2)}),$(document).on("click",".maintext-share-qq-space",function(s){s.preventDefault(),e(3)}),$(document).on("click",".maintext-share-qq",function(s){s.preventDefault(),e(4)})});