"use strict";function getDatediff(e){var s=6e4,t=60*s,a=24*t,i=(new Date).getTime(),n=i-e;if(!(0>n)){var r=n/a,l=n/t,c=n/s;if(r>=1){var m=new Date(e);result=m.getMonth()+1+"-"+m.getDate()}else result=l>=1?""+parseInt(l)+"小时前":c>=1?""+parseInt(c)+"分钟前":"刚刚";return result}}function moreReview(e){e.length>0&&$.each(e,function(s,t){e.length>1&&e.length<4?htmlStr+='<div class="reviews-children"><p class="child-title clearfix">'+(s+1)+".&ensp;"+t.passport.nickname+'<a href="#" class="nickname-right"><img src="images/review-zan_2x.png" alt=""></a></p><p class="child-content">'+t.content+"</p></div>":0==s?htmlStr+='<div class="reviews-children" ><p class="child-title">1.&ensp;'+t.passport.nickname+'<a href="#" class="nickname-right"><img src="images/review-zan_2x.png" alt=""></a></p><p class="child-content">'+t.content+"</p></div>":s>0&&s<e.length-2?htmlStr+='<div><div class="reviews-children center-more" style="display: none" ><p class="child-title clearfix">'+(s+1)+".&nbsp;"+t.passport.nickname+'</p><p class="child-content">'+t.content+'</p></div><a href="#" class="show-all-reviews"><p>显示全部评论</p></a></div>':s==e.length-2?htmlStr+='<div class="reviews-children" ><p class="child-title clearfix">'+(e.length-1)+".&ensp;"+t.passport.nickname+'<a href="#" class="nickname-right"><img src="images/review-zan_2x.png" alt=""></a></p><p class="child-content">'+t.content+"</p></div>":s==e.length-1&&(htmlStr+='<div class="reviews-children" ><p class="child-title clearfix">'+e.length+".&ensp;"+t.passport.nickname+'<a href="#" class="nickname-right"><img src="images/review-zan_2x.png" alt=""></a></p><p class="child-content">'+t.content+"</p></div>")})}function renderData(e){e?(htmlStr+='<div class="list"><h3>竞猜评论</h3><ul id="news_list">',htmlStr+='<section class="hot-reviews">',$.each(e.hots,function(s,t){e.hots.length>5?5>s&&(htmlStr+='<div class="reviews-box">',htmlStr+='<div class="reviews-header"><img src="'+t.passport.img_url+'" alt=""/></div>',htmlStr+='<div class="reviews-right">',htmlStr+='<p class="clearfix"><span class="reviews-name">'+t.passport.nickname+'</span><span class="nickname-right"><a href="#" class="reviews-zan"><img src="images/review-zan_2x.png" alt=""></a><a href="#" class="reviews-replay"><img src="images/Reply_2x.png" alt=""></a></span></p>',htmlStr+='<span class="reviews-time">'+getDatediff(1e3*t.create_time)+"</span>",moreReview(t.comments),htmlStr+='<p class="reviews-content">'+t.content+"</p></div></div>"):(htmlStr+='<div class="reviews-box">',htmlStr+='<div class="reviews-header"><img src="'+t.passport.img_url+'" alt=""/></div>',htmlStr+='<div class="reviews-right">',htmlStr+='<p class="clearfix"><span class="reviews-name">'+t.passport.nickname+'</span><span class="nickname-right"><a href="#" class="reviews-zan"><img src="images/review-zan_2x.png" alt=""></a><a href="#" class="reviews-replay"><img src="images/Reply_2x.png" alt=""></a></span></p>',htmlStr+='<span class="reviews-time">'+getDatediff(1e3*t.create_time)+"</span>",moreReview(t.comments),htmlStr+='<p class="reviews-content">'+t.content+"</p></div></div>",$.each(e.comments,function(s,a){s<5-e.hots.length&&(htmlStr+='<div class="reviews-box">',htmlStr+='<div class="reviews-header"><img src="'+a.passport.img_url+'" alt=""/></div>',htmlStr+='<div class="reviews-right">',htmlStr+='<p class="clearfix"><span class="reviews-name">'+t.passport.nickname+'</span><span class="nickname-right"><a href="#" class="reviews-zan"><img src="images/review-zan_2x.png" alt=""></a><a href="#" class="reviews-replay"><img src="images/Reply_2x.png" alt=""></a></span></p>',htmlStr+='<span class="reviews-time">'+getDatediff(1e3*a.create_time)+"</span>",moreReview(a.comments),htmlStr+='<p class="reviews-content">'+a.content+"</p></div></div>")}))}),htmlStr+="</section>"):htmlStr+='<div class="reviews-box"><img src="images/picture_2x.png>" alt=""></div>',$(".reviews").html(htmlStr)}window.Jn={};var result;Jn.addComment=function(e){isLoading=!1,"10000"==e.code&&renderData(e.data)};var htmlStr="";$(function(){$(document).on("click",".show-all-reviews",function(){$(this).hide(),$(".center-more").show()})});