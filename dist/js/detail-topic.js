"use strict";function getDatediff(a){var t,e=6e4,i=60*e,n=24*i,s=(new Date).getTime(),c=s-1e3*a;if(!(0>c)){var l=c/n,r=c/i,o=c/e;if(l>=1){var d=new Date(1e3*a);t=d.getMonth()+1+"-"+d.getDate()}else t=r>=1?""+parseInt(r)+"小时前":o>=1?""+parseInt(o)+"分钟前":"刚刚";return t}}function renderData(a){cacheData=a;var t=a.title?a.title:"",e=a.content?a.content:"",i=a.banner,n=a.avatar,s='<div class="allcontain detailWrap" style=""><div class="banner" style="background: url('+i+') no-repeat center top; background-size: auto 100%;"></div>';s+='<div class="container"><div class="wrap"><div class="left"><div class="details"><h1>'+t+'</h1><div class="detailsTit">',s+='<div class="pic"><img src="'+n+'"></div>',s+='<div class="ti">作者'+a.author+"</div>",a.time&&(s+='<span class="art-time"><i></i>'+time+"</span>"),s+="</div>",s+='<div class="indent">'+e+"</div>",s+="</div></div></div></div>",s+='<div class="share-short-issue"><p></p><p>分享给召唤师们</p><p></p></div>',s+='<div class="maintext-share"><a href="#" class="maintext-share-weixin"><img src="images/news_btn_weixin_nor.png" /></a><a href="#" class="maintext-share-frident"><img src="images/news_btn_pyq_nor.png" /></a><a href="#" class="maintext-share-qq-space"><img src="images/QQ_2x.png" /></a><a href="#" class="maintext-share-qq"><img src="images/qq_zone.png" /></a><a href="#" class="maintext-share-weibo"><img src="images/news_btn_weibo_nor.png" /></a></div></div>',a.pastlist.length>0&&(s+='<div class="list"><h3>往期回顾</h3><ul id="news_list">',$.each(a.pastlist,function(a,t){s+='<li class="clearFix"><a href="###" class="clearfix list-item" data-type="'+t.articleType+'" data-id="'+t.extra+'"><div class="news-left"><p class="list-title">'+t.title+"</p>",t.tagColor&&t.tagName&&(s+='<span class="list-tag" style="color:'+t.tagColor+";border-Color:"+t.tagColor+';">'+t.tagName+"</span>"),s+=t.comments?'<span class="list-review"><img src="images/Reply_2x.png" alt="">&ensp;'+t.comments+"</span>":'<span class="list-review"><img src="images/Reply_2x.png" alt="">&ensp;0</span>',t.updateTime&&(s+='<span class="list-time">'+getDatediff(t.updateTime)+"</span>"),s+='</div><div class="news-right clearfix"><img class="fl" src="'+t.thumbnail+'"/></div></a></li>'}),s+="</ul></div>"),$("#content").html(s)}window.Jn={};var cacheData=null;Jn.setData=function(a){"topicInitDetail"==a.key&&renderData(a.content)},$(function(){function a(a){try{var t=cacheData.thumbnail,e=cacheData.title,i=cacheData.excerpt,n=cacheData.shareUrl;Jnapp.jn_share(a,t,e,i,n)}catch(s){}}$.ajax({url:"data/detail-topic.json",type:"GET",dataType:"json",success:function(a){renderData(a.data)},error:function(a){alert("失败:"+a)}}),$(document).on("click",".detailsCon img",function(a){a.preventDefault();var t=$(this).attr("alt");t=t?t:"";try{Jnapp.jn_image($(this).attr("src"),t,"")}catch(a){}}),$(document).on("click",".maintext-share-weibo",function(t){t.preventDefault(),a(0)}),$(document).on("click",".maintext-share-weixin",function(t){t.preventDefault(),a(1)}),$(document).on("click",".maintext-share-frident",function(t){t.preventDefault(),a(2)}),$(document).on("click",".maintext-share-qq-space",function(t){t.preventDefault(),a(3)}),$(document).on("click",".maintext-share-qq",function(t){t.preventDefault(),a(4)}),$(document).on("click",".list-item",function(a){a.preventDefault();try{Jnapp.jn_related($(this).data("type"),$(this).data("id")+"")}catch(a){}})});